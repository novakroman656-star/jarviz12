<!doctype html>

<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jarviz 12 — Мозок & Аналітика</title>
  <meta name="description" content="Jarviz 12 — інтерактивний головний мозок з аналітикою" />
  <meta name="theme-color" content="#0f1724" />  <!-- Chart.js CDN -->  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>  <style>
    :root{--bg:#070709;--card:#0f1724;--accent:#06b6a4;--muted:#9ca3af;--glass: rgba(255,255,255,0.03)}
    *{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#e6eef2;background:linear-gradient(180deg,#020202 0%, #060617 100%);}
    header{display:flex;align-items:center;gap:16px;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,0.03);}
    h1{font-size:18px;margin:0;color:var(--accent)}
    .container{display:grid;grid-template-columns:1fr 420px;gap:18px;padding:18px;min-height:calc(100vh - 70px)}
    .left{background:var(--card);padding:18px;border-radius:14px;box-shadow:0 6px 20px rgba(2,6,23,0.6);}
    .right{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px;}

    /* Brain canvas */
    .brain-wrap{display:flex;flex-direction:column;align-items:center;gap:12px}
    svg.brain{width:100%;max-width:780px;height:420px}
    .neuron{cursor:pointer;transition:transform .18s ease,opacity .14s}
    .neuron:hover{transform:scale(1.08)}

    /* Cards */
    .card{background:var(--glass);padding:12px;border-radius:12px;color:#dfe7ea}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:#041017;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    .stat-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}
    .stat{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;text-align:center}
    .stat .num{font-size:18px;font-weight:700;color:var(--accent)}

    /* right column */
    .chart-wrap{height:200px}
    footer{padding:12px;text-align:center;color:var(--muted);font-size:13px}

    @media(max-width:980px){.container{grid-template-columns:1fr}.right{order:2}.left{order:1}}
  </style></head>
<body>
  <header>
    <h1>Jarviz 12 — Головний Мозок</h1>
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <button id="installBtn" class="btn ghost">Встановити (PWA)</button>
      <button id="voiceBtn" class="btn">Голос</button>
    </div>
  </header>  <main class="container">
    <section class="left">
      <div class="brain-wrap card">
        <h2 style="margin:0;color:#dff6ef">Головний мозок — нейронна панель</h2>
        <svg class="brain" viewBox="0 0 1200 600" xmlns="http://www.w3.org/2000/svg">
          <!-- simple abstract brain with nodes -->
          <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="6" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>
          <g id="links" stroke="rgba(255,255,255,0.06)" stroke-width="2">
            <line x1="200" y1="200" x2="350" y2="160" />
            <line x1="350" y1="160" x2="520" y2="220" />
            <line x1="520" y1="220" x2="700" y2="180" />
            <line x1="700" y1="180" x2="920" y2="240" />
            <line x1="900" y1="320" x2="700" y2="360" />
            <line x1="550" y1="400" x2="700" y2="360" />
            <line x1="350" y1="420" x2="550" y2="400" />
            <line x1="220" y1="340" x2="350" y2="420" />
          </g><!-- neurons -->
      <g id="neurons" fill="none" stroke-width="0">
        <g class="neuron" data-id="1" transform="translate(200,200)">
          <circle r="22" fill="#052b2a" stroke="#06b6a4" stroke-width="3" filter="url(#glow)"></circle>
        </g>
        <g class="neuron" data-id="2" transform="translate(350,160)">
          <circle r="20" fill="#072b2b" stroke="#06b6a4" stroke-width="2.5"></circle>
        </g>
        <g class="neuron" data-id="3" transform="translate(520,220)">
          <circle r="26" fill="#022426" stroke="#06b6a4" stroke-width="3"></circle>
        </g>
        <g class="neuron" data-id="4" transform="translate(700,180)">
          <circle r="24" fill="#031b1b" stroke="#06b6a4" stroke-width="2.5"></circle>
        </g>
        <g class="neuron" data-id="5" transform="translate(920,240)">
          <circle r="18" fill="#052425" stroke="#06b6a4" stroke-width="2"></circle>
        </g>
        <g class="neuron" data-id="6" transform="translate(900,320)">
          <circle r="20" fill="#031a1a" stroke="#06b6a4" stroke-width="2.5"></circle>
        </g>
        <g class="neuron" data-id="7" transform="translate(700,360)">
          <circle r="22" fill="#052b2b" stroke="#06b6a4" stroke-width="2.5"></circle>
        </g>
        <g class="neuron" data-id="8" transform="translate(550,400)">
          <circle r="20" fill="#052b2b" stroke="#06b6a4" stroke-width="2"></circle>
        </g>
        <g class="neuron" data-id="9" transform="translate(350,420)">
          <circle r="18" fill="#072b2b" stroke="#06b6a4" stroke-width="2"></circle>
        </g>
        <g class="neuron" data-id="10" transform="translate(220,340)">
          <circle r="20" fill="#062525" stroke="#06b6a4" stroke-width="2"></circle>
        </g>
      </g>
    </svg>

    <div style="width:100%;display:flex;gap:8px;align-items:center;justify-content:space-between">
      <div class="controls">
        <button id="refreshData" class="btn">Оновити аналітику</button>
        <button id="exportBtn" class="btn ghost">Експорт JSON</button>
      </div>
      <div style="text-align:right;color:var(--muted)">Останнє оновлення: <span id="lastUpdate">зараз</span></div>
    </div>

    <div class="stat-grid" style="width:100%">
      <div class="stat"><div class="num" id="stat-1">—</div><div class="label">Сигнали/хв</div></div>
      <div class="stat"><div class="num" id="stat-2">—</div><div class="label">Аналізи</div></div>
      <div class="stat"><div class="num" id="stat-3">—</div><div class="label">Нейронів активних</div></div>
    </div>

  </div>

  <div style="margin-top:12px" class="card">
    <h3 style="margin:0 0 8px 0;color:#dff6ef">Деталі нейрона</h3>
    <div id="neuronInfo">Натисни на нейрон, щоб побачити метрики та логіку.</div>
  </div>

</section>

<aside class="right">
  <div class="card">
    <h3 style="margin:0 0 8px 0;color:#dff6ef">Глобальна аналітика</h3>
    <div class="chart-wrap"><canvas id="chart1"></canvas></div>
    <div style="height:12px"></div>
    <div class="chart-wrap"><canvas id="chart2"></canvas></div>
  </div>

  <div style="margin-top:12px" class="card">
    <h4 style="margin:0 0 8px 0;color:#dff6ef">Налаштування головного мозку</h4>
    <div style="display:flex;flex-direction:column;gap:8px">
      <label><input id="autosync" type="checkbox"/> Автоматичне оновлення (10s)</label>
      <label>Рівень чутливості: <input id="sensitivity" type="range" min="1" max="10" value="6"/></label>
      <button id="resetBtn" class="btn ghost">Скинути дані (симулятор)</button>
    </div>
  </div>

</aside>

  </main>  <footer>Jarviz 12 • Demo • Змінюй код у GitHub, сайт автоматично оновиться</footer>  <script>
    // === PWA install prompt handling ===
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'inline-block';
    });
    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        deferredPrompt = null;
      } else alert('Встановлення доступне через браузер: Додати на головний екран');
    });

    // === Simple simulated analytics data ===
    const stats = { signalsPerMin:0, analyses:0, active:0 };
    function randomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    function updateStats(){
      stats.signalsPerMin = randomInt(10,120);
      stats.analyses = randomInt(5,60);
      stats.active = randomInt(2,9);
      document.getElementById('stat-1').textContent = stats.signalsPerMin;
      document.getElementById('stat-2').textContent = stats.analyses;
      document.getElementById('stat-3').textContent = stats.active;
      document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
      // update charts
      addChartPoint(chart1, stats.signalsPerMin);
      addChartPoint(chart2, stats.analyses);
    }

    // === Neuron interactions ===
    const neuronEls = document.querySelectorAll('.neuron');
    const neuronInfo = document.getElementById('neuronInfo');
    const neuronData = {};
    neuronEls.forEach(el=>{
      const id = el.dataset.id;
      neuronData[id] = { id, name: 'Neuron '+id, load: randomInt(1,100), errors: randomInt(0,6) };
      el.addEventListener('click', ()=>{
        const d = neuronData[id];
        neuronInfo.innerHTML = `<b>${d.name}</b><br>Завантаження: ${d.load}%<br>Помилок: ${d.errors}<br><button id=neuroTune class='btn'>Оптимізувати</button>`;
        document.getElementById('neuroTune').addEventListener('click', ()=>{
          d.load = Math.max(1,d.load - randomInt(4,16));
          d.errors = Math.max(0,d.errors - randomInt(0,2));
          alert('Оптимізація завершена');
          neuronInfo.innerHTML = `<b>${d.name}</b><br>Завантаження: ${d.load}%<br>Помилок: ${d.errors}`;
        });
      });
    });

    // === Charts ===
    const ctx1 = document.getElementById('chart1').getContext('2d');
    const ctx2 = document.getElementById('chart2').getContext('2d');
    const createSpark = (ctx,label)=> new Chart(ctx,{type:'line',data:{labels:[],datasets:[{label:label,data:[],tension:0.35,fill:true,pointRadius:0}]},options:{plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}});
    const chart1 = createSpark(ctx1,'Сигнали');
    const chart2 = createSpark(ctx2,'Аналізи');
    function addChartPoint(chart,value){
      chart.data.labels.push('');
      chart.data.datasets[0].data.push(value);
      if(chart.data.labels.length>24){chart.data.labels.shift();chart.data.datasets[0].data.shift()}
      chart.update();
    }

    // initial seed
    for(let i=0;i<6;i++){updateStats()}

    document.getElementById('refreshData').addEventListener('click', updateStats);
    document.getElementById('exportBtn').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify({stats,neuronData,ts:Date.now()},null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='jarviz12-analytics.json'; a.click(); URL.revokeObjectURL(url);
    });

    let autosyncTimer=null;
    document.getElementById('autosync').addEventListener('change',(e)=>{
      if(e.target.checked){autosyncTimer=setInterval(updateStats,10000)}else{clearInterval(autosyncTimer)}
    });
    document.getElementById('resetBtn').addEventListener('click', ()=>{chart1.data.labels=[];chart1.data.datasets[0].data=[];chart1.update();chart2.data.labels=[];chart2.data.datasets[0].data=[];chart2.update();alert('Симулятор перезапущено');});

    // === Web Speech (simple) ===
    const voiceBtn = document.getElementById('voiceBtn');
    let voiceOn=false; voiceBtn.addEventListener('click',()=>{
      if(!('speechSynthesis' in window)){alert('Голос недоступний у цьому браузері');return}
      voiceOn=!voiceOn; voiceBtn.textContent = voiceOn? 'Голос: Вкл':'Голос';
      if(voiceOn){speak('Привіт, я Джарвіс дванадцять. Чим допомогти?')}
    });
    function speak(text){const u=new SpeechSynthesisUtterance(text);u.lang='uk-UA';u.rate=1;u.pitch=0.9;window.speechSynthesis.speak(u)}

    // === small service worker install (constructed as blob) to enable offline caching ===
    const swCode = `self.addEventListener('install',e=>{self.skipWaiting();});self.addEventListener('fetch',()=>{});`;
    const swBlob = new Blob([swCode],{type:'text/javascript'});
    const swUrl = URL.createObjectURL(swBlob);
    if('serviceWorker' in navigator){navigator.serviceWorker.register(swUrl).catch(()=>{});} 

    // === Save changes to localStorage so user can continue editing later ===
    window.addEventListener('beforeunload',()=>{localStorage.setItem('jarviz-last',JSON.stringify({stats,neuronData}));});

  </script></body>
</html>
